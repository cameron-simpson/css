#!/bin/sh
#
# Run app-helper with the autoview mode on, defaulting to view-unknown.
#	- Cameron Simpson <cs@zip.com.au> 17dec2002
#

cmd=$0

ahopts=
while :
do
  case "$1" in
    -[nyNYAX])	ahopts="$ahopts $1" ;;
    *)		break ;;
  esac
  shift
done

if [ $# = 0 ]
then
    if [ -n "$DISPLAY" ]
    then
	set -- "`xclip -o`" || exit 1
    else
	echo "Usage: $cmd file [command [args...]]" >&2
	exit 2
    fi
fi

[ $# = 1 ] && set -- "$1" view-unknown
file=$1; shift
##set -x
exec apphelper "$file" -y $ahopts "$@"
