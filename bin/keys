#!/bin/sh -ue
#
# Open the specified GPG file for editing.
#       - Cameron Simpson <cs@zip.com.au>
#

cmd=$0
usage="Usage: $cmd [base]"

trace=set-x
file=$HOME/rc/secret-gpg/keys.gpg

TMPDIR=$HOME/private/tmp
export TMPDIR
umask 077
[ -d "$TMPDIR/." ] || mkdir -p "$TMPDIR"

[ $# = 0 ] || { file=$1; shift; }
[ $# = 0 ] || { echo "$usage" >&2; exit 2; }
[ -s "$file" ] || { echo "$cmd: $file: missing/empty file" >&2; exit 1; }
exec $trace decco-edit "$file" "${EDITOR:-vi}"
