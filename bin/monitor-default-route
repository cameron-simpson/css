#!/bin/sh
#
# Monitor the presence of a default route.
#   - Cameron Simpson <cs@zip.com.au> 05nov2014
#

svc_name=route_default
flag_name=ROUTE_DEFAULT

exec \
  svcd -l -n "$svc_name" -x \
    flag -w "$flag_name" \
      -c "netstat -rn | egrep '^(default|0\\.0\\.0\\.0) +[1-9]' >/dev/null"
