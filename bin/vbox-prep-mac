#!/bin/sh
#
# Prepare a VirtualBox Mac VM for better behaviour.
# - Cameron Simpson <cs@cskk.id.au> 21oct2016
#

cmd=$0
usage="Usage: $cmd vmname"

[ $# = 1 ] || { echo "$usage" >&2; exit 2; }
vmname=$1; shift

set -x
VBoxManage modifyvm "$vmname" --cpusetid 00000001 000106e5 00100800 0098e3fb bfebfbff
VBoxManage setextradata "$vmname" "VBoxInternal/Devices/efi/0/Config/DmiSystemProduct" "iMac11,3"
VBoxManage setextradata "$vmname" "VBoxInternal/Devices/efi/0/Config/DmiSystemVersion" "1.0"
VBoxManage setextradata "$vmname" "VBoxInternal/Devices/efi/0/Config/DmiBoardProduct" "Iloveapple"
VBoxManage setextradata "$vmname" "VBoxInternal/Devices/efi/0/Config/DmiDeviceKey" "ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc"
VBoxManage setextradata "$vmname" "VBoxInternal/Devices/efi/0/Config/GetKeyFromRealSMC" 1
