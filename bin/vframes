#!/bin/sh
#
# Extract video frames using mplayer. - Cameron Simpson <cs@cskk.id.au>
#

set -ue

framestep=I

cmd=$0
usage="Usage: $cmd [framestep] [mplayer-opts...] video-file
  Default framestep: I
  Example: $cmd 24 foo.mp4  # extract every 24 frames"

if [ $# -gt 0 ]
then
  case $1 in
    [1-9]|[1-9][0-9]|[1-9][0-9][0-9]|I)
      framestep=$1
      shift
      ;;
  esac
fi

set -x
exec mplayer -nosound -vo png:z=9 -vf "framestep=$framestep" ${1+"$@"}
