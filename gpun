#!/bin/sh

cmd=$0
usage="Usage: $cmd [subdirpfx] [-w] [lown] highn URLtplt"

badopts=

# hack to permit leading subdir prefix
dirpfx=
case $1 in
    ''|[0-9]*|-*) ;;
    *)		dirpfx=$1; shift ;;
esac

wopt=
[ "x$1" = x-w ] && { wopt=$1; shift; }

case $# in
    2)	lown=1 highn=$1 url=$2 ;;
    3)	lown=$1 highn=$2 url=$3 ;;
    *)	echo "$cmd: wrong number of arguments" >&2; badopts=1 ;;
esac

seq=`seq $wopt "$lown" "$highn"` || badopts=1

[ $badopts ] && { echo "$usage" >&2; exit 2; }

xit=0
for n in $seq
do  eval "nurl=$url"
    set-x gpu -s $dirpfx "$nurl" || xit=1
done &
