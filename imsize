#!/usr/bin/perl
#
# Report image sizes.
#	- Cameron Simpson <cs@zip.com.au> 01jun99
#
# Usage: imsize [filenames...]
#
# Output is
#	filename x y
# for each supplied name or
#	x y
# for the file on stdin if no filenames are supplied.
#

use Image::Size;

my($x,$y,$err);

my $xit = 0;

if (@ARGV)
{ for my $f (@ARGV)
  { ($x,$y,$err)=imgsize($f);
    if (defined $x)
    { print "$f $x $y\n";
    }
    else
    { warn "$0: $f: $err (maybe errno \"$!\")\n";
      $xit=1;
    }
  }
}
else
{ 
  my $err;

  ($x,$y,$err)=imgsize('/dev/fd/0');
  if (defined $x)
  { print "$x $y\n";
  }
  else
  { warn "$0: STDIN: $err\n";
    $xit=1;
  }
}

exit $xit;
