#!/bin/sh
#
# =head1 NAME
#
# pipeargs - feed arguments, one per line, to stdin of a command
#
# =head1 SYNOPSIS
#
# pipeargs shcmd [args...]
#
# =head1 DESCRIPTION
#
# I<pipeargs> runs the shell command I<shcmd>
# with input from a file containing the I<args>, one per line.
#

usage="Usage: $0 shcmd [args...]"

badopts=
if [ $# = 0 ]
then  echo "$0: missing shcmd" >&2; badopts=1
else  shcmd=$1; shift
fi
[ $badopts ] && { echo "$usage" >&2; exit 2; }

tmp=.pa$$
[ -f "$tmp" ] && tmp=$HOME/.pa$$
[ -f "$tmp" ] && tmp=/tmp/.pa$$
[ -f "$tmp" ] && { echo "$0: can't create $tmp" >&2; exit 1; }

for arg
do  echo "$arg"
done >"$tmp"

exec <"$tmp"
rm -f "$tmp"

exec sh -c "$shcmd"

# =head1 AUTHOR
#
# Cameron Simpson E<lt>cs@zip.com.auE<gt> 20mar2000
#
