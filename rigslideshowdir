#!/bin/sh
#
# Make a slideshow directory - a dir full of symlinks to things to show.
# Emits shell; pipe through "sh -x"to actually do stuff.
#	- Cameron Simpson <cs@zip.com.au> 01aug2003
#

cmd=`basename "$0"`
usage="Usage: $cmd [pickim-options...] keywords...
  Suggestion: $cmd -w -o keywords..."

if [ $# = 0 ]
then
    if [ -s .slideshow ]
    then  set x `cat .slideshow`; shift
    fi
    [ $# = 0 ] && { echo "$usage" >&2; exit 2; }
fi

set-x pickim -o "$@" \
| while read path
  do  lpath=`echo "$path" | tr -s / _ | sed 's/^_//'`
      echo "$lpath $path"
  done \
| updlinkforest
