#!/bin/sh
#

[ -n "$LUSER" ] && [ "x$LUSER" != "x$USER" ] \
	&& { echo "$0: LUSER($LUSER) != USER($USER), aborting" >&2
	     exit 1
	   }

# flush alert window when I read my important email
[ "x$*" = 'x-f +attn' ] && { ##clear | alert;
			     # set atime > mtime for alert log
			     LOGDIR=${LOGDIR:-$HOME/var/log}
			     sed 1q "$LOGDIR/alert" >/dev/null
			   }

case "$TERM" in
    xterm)
	if [ "x$HOST@$SYSTEMID" != xzipperii@zip ]
	then
	    TERM=rxvt; export TERM
	    unset TERMINFO
	    unset TERMCAP
	fi
	;;
esac

for muttdir in \
	/opt/mutt-1.5.13-fc4 \
	/opt/mutt-1.5.8-header-cache.29-fc3 \
	/opt/mutt-1.5.6i-headercache-fc2 \
	/opt/mutt-1.5.6i-headercache-rh9 \
	/opt/mutt-1.5.5.1-nntp.vvv \
	/opt/mutt-1.4i-patched \
	/opt/mutt-cvs \
	/opt/mutt \
	/usr
do
  mutt=$muttdir/bin/mutt
  [ -f "$mutt" ] && { set -x; exec "$mutt" ${1+"$@"}; }
done

echo "$0: can't find a mutt installation!" >&2
exit 1
